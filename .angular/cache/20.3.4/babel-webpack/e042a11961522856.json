{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Router, RouterModule } from '@angular/router';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { FormsModule } from '@angular/forms';\nimport { AuthService } from '../../services/auth.service';\nimport { TemplateCsvService } from '../../services/template-csv.service';\nimport { MobileMenuService } from '../../services/mobile-menu.service';\nimport { debounceTime, distinctUntilChanged, Subject } from 'rxjs';\nimport { getPlanoNome } from '../../shared/planos-config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"../../services/template-csv.service\";\nimport * as i4 from \"../../services/mobile-menu.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/tooltip\";\nimport * as i7 from \"@angular/forms\";\nfunction TopbarComponent_div_7__svg_svg_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 31);\n    i0.ɵɵelement(1, \"circle\", 32)(2, \"path\", 33);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TopbarComponent_div_7_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function TopbarComponent_div_7_button_11_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.clearSearch());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 35);\n    i0.ɵɵelement(2, \"line\", 36)(3, \"line\", 37);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TopbarComponent_div_7_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵelement(1, \"div\", 44);\n    i0.ɵɵelementStart(2, \"p\", 45);\n    i0.ɵɵtext(3, \"Buscando templates...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TopbarComponent_div_7_div_12_div_2_div_3_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p\", 65);\n  }\n  if (rf & 2) {\n    const template_r6 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r2.highlightMatch(template_r6.descricao, ctx_r2.searchTerm), i0.ɵɵsanitizeHtml);\n  }\n}\nfunction TopbarComponent_div_7_div_12_div_2_div_3_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 66);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const campo_r8 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", campo_r8.nome, \" \");\n  }\n}\nfunction TopbarComponent_div_7_div_12_div_2_div_3_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 67);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const template_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" +\", template_r6.campos.length - 3, \" \");\n  }\n}\nfunction TopbarComponent_div_7_div_12_div_2_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 49);\n    i0.ɵɵlistener(\"click\", function TopbarComponent_div_7_div_12_div_2_div_3_Template_div_click_0_listener() {\n      const template_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r2.selectTemplate(template_r6));\n    })(\"mouseenter\", function TopbarComponent_div_7_div_12_div_2_div_3_Template_div_mouseenter_0_listener() {\n      const i_r7 = i0.ɵɵrestoreView(_r5).index;\n      const ctx_r2 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r2.selectedIndex = i_r7);\n    });\n    i0.ɵɵelementStart(1, \"div\", 50)(2, \"div\", 51)(3, \"div\", 52);\n    i0.ɵɵelement(4, \"h4\", 53);\n    i0.ɵɵelementStart(5, \"span\", 54);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, TopbarComponent_div_7_div_12_div_2_div_3_p_7_Template, 1, 1, \"p\", 55);\n    i0.ɵɵelementStart(8, \"div\", 56);\n    i0.ɵɵtemplate(9, TopbarComponent_div_7_div_12_div_2_div_3_span_9_Template, 2, 1, \"span\", 57)(10, TopbarComponent_div_7_div_12_div_2_div_3_span_10_Template, 2, 1, \"span\", 58);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 59)(12, \"div\", 60);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(13, \"svg\", 61);\n    i0.ɵɵelement(14, \"rect\", 62)(15, \"line\", 63)(16, \"line\", 64);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const template_r6 = ctx.$implicit;\n    const i_r7 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.selectedIndex === i_r7 ? \"bg-indigo-50 border-indigo-100\" : \"hover:bg-gray-50\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r2.highlightMatch(template_r6.nome, ctx_r2.searchTerm), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", template_r6.totalUso > 0 ? \"bg-green-100 text-green-800\" : \"bg-gray-100 text-gray-800\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", template_r6.totalUso || 0, \" uso\", (template_r6.totalUso || 0) !== 1 ? \"s\" : \"\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", template_r6.descricao);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", template_r6.campos == null ? null : template_r6.campos.slice(0, 3));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (template_r6.campos == null ? null : template_r6.campos.length) > 3);\n  }\n}\nfunction TopbarComponent_div_7_div_12_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"div\", 47);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, TopbarComponent_div_7_div_12_div_2_div_3_Template, 17, 8, \"div\", 48);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", ctx_r2.searchResults.length, \" template\", ctx_r2.searchResults.length > 1 ? \"s\" : \"\", \" encontrado\", ctx_r2.searchResults.length > 1 ? \"s\" : \"\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.searchResults);\n  }\n}\nfunction TopbarComponent_div_7_div_12_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 68)(1, \"div\", 69);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 70);\n    i0.ɵɵelement(3, \"circle\", 20)(4, \"path\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(5, \"h3\", 71);\n    i0.ɵɵtext(6, \"Nenhum formul\\u00E1rio encontrado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 72);\n    i0.ɵɵtext(8, \"Tente buscar por um nome diferente ou crie um Novo Formul\\u00E1rio.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 73);\n    i0.ɵɵlistener(\"click\", function TopbarComponent_div_7_div_12_div_3_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r2 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r2.criarNovoTemplate());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(10, \"svg\", 28);\n    i0.ɵɵelement(11, \"path\", 29)(12, \"path\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \" Criar Formul\\u00E1rio \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TopbarComponent_div_7_div_12_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 74)(1, \"div\", 75)(2, \"span\");\n    i0.ɵɵtext(3, \"Use \\u2191\\u2193 para navegar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Enter para selecionar\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction TopbarComponent_div_7_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵtemplate(1, TopbarComponent_div_7_div_12_div_1_Template, 4, 0, \"div\", 39)(2, TopbarComponent_div_7_div_12_div_2_Template, 4, 4, \"div\", 40)(3, TopbarComponent_div_7_div_12_div_3_Template, 14, 0, \"div\", 41)(4, TopbarComponent_div_7_div_12_div_4_Template, 6, 0, \"div\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.searchLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.searchLoading && ctx_r2.searchResults.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.searchLoading && ctx_r2.searchResults.length === 0 && ctx_r2.searchTerm);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.searchLoading && ctx_r2.searchResults.length > 0);\n  }\n}\nfunction TopbarComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17)(2, \"div\", 18);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(3, \"svg\", 19);\n    i0.ɵɵelement(4, \"circle\", 20)(5, \"path\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"input\", 22, 1);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function TopbarComponent_div_7_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.searchTerm, $event) || (ctx_r2.searchTerm = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"input\", function TopbarComponent_div_7_Template_input_input_6_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onSearchInput($event));\n    })(\"focus\", function TopbarComponent_div_7_Template_input_focus_6_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onSearchFocus());\n    })(\"blur\", function TopbarComponent_div_7_Template_input_blur_6_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onSearchBlur());\n    })(\"keydown\", function TopbarComponent_div_7_Template_input_keydown_6_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onSearchKeydown($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"kbd\", 23);\n    i0.ɵɵtext(9, \"\\u2318K\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, TopbarComponent_div_7__svg_svg_10_Template, 3, 0, \"svg\", 24)(11, TopbarComponent_div_7_button_11_Template, 4, 0, \"button\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, TopbarComponent_div_7_div_12_Template, 5, 4, \"div\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function TopbarComponent_div_7_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.criarNovoTemplate());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(14, \"svg\", 28);\n    i0.ɵɵelement(15, \"path\", 29)(16, \"path\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(17, \"span\");\n    i0.ɵɵtext(18, \"Novo Formul\\u00E1rio\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.searchFocused ? \"border-indigo-500 bg-white shadow-lg\" : \"border-transparent\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.searchFocused ? \"text-indigo-500\" : \"text-gray-400\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.searchTerm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.searchTerm ? \"opacity-0\" : \"opacity-100\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.searchLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.searchTerm && !ctx_r2.searchLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showSearchResults);\n  }\n}\nfunction TopbarComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"div\", 76)(3, \"span\", 77)(4, \"span\", 78);\n    i0.ɵɵtext(5, \"Bem vindo,\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 79)(8, \"button\", 80);\n    i0.ɵɵlistener(\"click\", function TopbarComponent_ng_container_9_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.logout());\n    });\n    i0.ɵɵtext(9, \" Sair \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.nomeUsuario, \"!\");\n  }\n}\nfunction TopbarComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 81);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 28);\n    i0.ɵɵelement(2, \"path\", 82)(3, \"polyline\", 83)(4, \"line\", 84);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(5, \"span\", 85);\n    i0.ɵɵtext(6, \"Login\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"a\", 86);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(8, \"svg\", 28);\n    i0.ɵɵelement(9, \"path\", 87)(10, \"circle\", 88)(11, \"line\", 89)(12, \"line\", 90);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(13, \"span\", 85);\n    i0.ɵɵtext(14, \"Registrar\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class TopbarComponent {\n  router;\n  authService;\n  templateService;\n  mobileMenuService;\n  nomeUsuario = '';\n  mobileMenuOpen = false;\n  plano = '';\n  usuarioSub;\n  planoSub;\n  toggleMobileMenu() {\n    this.mobileMenuService.toggleMobileMenu();\n  }\n  // Propriedades da busca\n  searchTerm = '';\n  searchResults = [];\n  searchLoading = false;\n  searchFocused = false;\n  showSearchResults = false;\n  selectedIndex = -1;\n  searchSubject = new Subject();\n  searchSubscription;\n  constructor(router, authService, templateService, mobileMenuService) {\n    this.router = router;\n    this.authService = authService;\n    this.templateService = templateService;\n    this.mobileMenuService = mobileMenuService;\n  }\n  ngOnInit() {\n    // Inscrever-se no observable de usuário\n    this.usuarioSub = this.authService.usuario$.subscribe(nome => {\n      this.nomeUsuario = this.formatarNome(nome || '');\n    });\n    // Inscrever-se no observable de plano (NOVO!)\n    this.planoSub = this.authService.plano$.subscribe(plano => {\n      this.plano = plano || 'PESSOAL';\n      console.log(`🔄 TopBar: Plano atualizado para ${this.plano}`);\n    });\n    // Carregar dados iniciais\n    const nomeSalvo = localStorage.getItem('nome');\n    if (nomeSalvo) {\n      this.nomeUsuario = this.formatarNome(nomeSalvo);\n    }\n    // Configurar busca com debounce\n    this.searchSubscription = this.searchSubject.pipe(debounceTime(300), distinctUntilChanged()).subscribe(term => {\n      this.performSearch(term);\n    });\n  }\n  ngOnDestroy() {\n    this.usuarioSub?.unsubscribe();\n    this.planoSub?.unsubscribe();\n    this.searchSubscription?.unsubscribe();\n  }\n  logout() {\n    this.authService.logout();\n  }\n  criarNovoTemplate() {\n    this.router.navigate(['/formularios']);\n  }\n  planoNome(plano) {\n    return getPlanoNome(plano);\n  }\n  getInitials(nome) {\n    if (!nome) return 'U';\n    const partes = nome.trim().split(' ').filter(parte => parte.length > 0);\n    if (partes.length === 0) return 'U';\n    if (partes.length === 1) return partes[0].charAt(0).toUpperCase();\n    // Pega primeira letra do primeiro e último nome\n    return (partes[0].charAt(0) + partes[partes.length - 1].charAt(0)).toUpperCase();\n  }\n  // Métodos da busca\n  onSearchInput(event) {\n    const term = event.target.value;\n    this.searchTerm = term;\n    this.selectedIndex = -1;\n    if (term.trim()) {\n      this.showSearchResults = true;\n      this.searchSubject.next(term.trim());\n    } else {\n      this.showSearchResults = false;\n      this.searchResults = [];\n    }\n  }\n  onSearchFocus() {\n    this.searchFocused = true;\n    if (this.searchTerm.trim()) {\n      this.showSearchResults = true;\n    }\n  }\n  onSearchBlur() {\n    // Delay para permitir cliques nos resultados\n    setTimeout(() => {\n      this.searchFocused = false;\n      this.showSearchResults = false;\n    }, 200);\n  }\n  onSearchKeydown(event) {\n    if (!this.showSearchResults || this.searchResults.length === 0) return;\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        this.selectedIndex = Math.min(this.selectedIndex + 1, this.searchResults.length - 1);\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        this.selectedIndex = Math.max(this.selectedIndex - 1, -1);\n        break;\n      case 'Enter':\n        event.preventDefault();\n        if (this.selectedIndex >= 0 && this.selectedIndex < this.searchResults.length) {\n          this.selectTemplate(this.searchResults[this.selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        this.clearSearch();\n        break;\n    }\n  }\n  performSearch(term) {\n    if (!term.trim()) {\n      this.searchResults = [];\n      this.searchLoading = false;\n      return;\n    }\n    this.searchLoading = true;\n    this.templateService.listarTemplates().subscribe({\n      next: templates => {\n        // Filtrar templates que correspondem ao termo de busca\n        this.searchResults = templates.filter(template => this.matchesSearchTerm(template, term)).slice(0, 10); // Limitar a 10 resultados\n        this.searchLoading = false;\n      },\n      error: error => {\n        console.error('Erro ao Buscar Formulários:', error);\n        this.searchResults = [];\n        this.searchLoading = false;\n      }\n    });\n  }\n  matchesSearchTerm(template, term) {\n    const lowerTerm = term.toLowerCase();\n    // Buscar no nome\n    if (template.nome?.toLowerCase().includes(lowerTerm)) {\n      return true;\n    }\n    // Buscar na descrição\n    if (template.descricao?.toLowerCase().includes(lowerTerm)) {\n      return true;\n    }\n    // Buscar nos campos\n    if (template.campos?.some(campo => campo.nome?.toLowerCase().includes(lowerTerm) || campo.valor?.toLowerCase().includes(lowerTerm))) {\n      return true;\n    }\n    return false;\n  }\n  highlightMatch(text, term) {\n    if (!text || !term) return text;\n    const regex = new RegExp(`(${term})`, 'gi');\n    return text.replace(regex, '<mark class=\"bg-yellow-200 px-1 rounded\">$1</mark>');\n  }\n  selectTemplate(template) {\n    // Navegar para a página de templates com o template selecionado\n    this.router.navigate(['/templates'], {\n      queryParams: {\n        selected: template.id\n      }\n    });\n    this.clearSearch();\n  }\n  clearSearch() {\n    this.searchTerm = '';\n    this.searchResults = [];\n    this.showSearchResults = false;\n    this.selectedIndex = -1;\n    this.searchLoading = false;\n  }\n  // Listener para fechar busca ao clicar fora\n  onDocumentClick(event) {\n    const target = event.target;\n    const searchContainer = target.closest('.relative');\n    if (!searchContainer || !searchContainer.contains(target)) {\n      this.showSearchResults = false;\n    }\n  }\n  formatarNome(nome) {\n    if (!nome) return '';\n    // Remove espaços extras e quebra em partes\n    const partes = nome.trim().split(' ').filter(parte => parte.length > 0);\n    if (partes.length === 0) return '';\n    // Se tem apenas uma parte, retorna ela\n    if (partes.length === 1) return partes[0];\n    // Se tem duas ou mais partes, retorna apenas o primeiro nome\n    return partes[0];\n  }\n  static ɵfac = function TopbarComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TopbarComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.TemplateCsvService), i0.ɵɵdirectiveInject(i4.MobileMenuService));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TopbarComponent,\n    selectors: [[\"app-topbar\"]],\n    hostBindings: function TopbarComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function TopbarComponent_click_HostBindingHandler($event) {\n          return ctx.onDocumentClick($event);\n        }, i0.ɵɵresolveDocument);\n      }\n    },\n    decls: 18,\n    vars: 3,\n    consts: [[\"guestActions\", \"\"], [\"searchInput\", \"\"], [1, \"fixed\", \"top-0\", \"left-0\", \"right-0\", \"z-50\", \"bg-white\", \"border-b\", \"border-gray-200\", \"h-14\"], [1, \"flex\", \"items-center\", \"justify-between\", \"h-full\", \"px-3\"], [1, \"flex\", \"items-center\", \"gap-2\"], [\"routerLink\", \"\", 1, \"flex\", \"items-center\", \"gap-2\", \"hover:opacity-80\", \"transition-opacity\", \"duration-200\"], [\"src\", \"assets/images/formsync-logo.svg\", \"alt\", \"FormSync Logo\", 1, \"w-8\", \"h-8\"], [1, \"text-xl\", \"sm:text-1xl\", \"font-black\", \"text-blue-600\"], [\"class\", \"flex items-center gap-3\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"matTooltip\", \"Menu\", 1, \"lg:hidden\", \"p-1.5\", \"text-gray-600\", \"hover:text-gray-900\", \"hover:bg-gray-100\", \"rounded-lg\", \"transition-colors\", \"duration-200\", \"bg-red-500\", 2, \"z-index\", \"9999\", \"position\", \"relative\", 3, \"click\"], [\"width\", \"18\", \"height\", \"18\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"x1\", \"3\", \"y1\", \"6\", \"x2\", \"21\", \"y2\", \"6\"], [\"x1\", \"3\", \"y1\", \"12\", \"x2\", \"21\", \"y2\", \"12\"], [\"x1\", \"3\", \"y1\", \"18\", \"x2\", \"21\", \"y2\", \"18\"], [1, \"h-14\"], [1, \"flex\", \"items-center\", \"gap-3\"], [1, \"hidden\", \"md:flex\", \"relative\"], [1, \"flex\", \"items-center\", \"bg-gray-50\", \"rounded-lg\", \"px-2\", \"py-1\", \"min-w-48\", \"border-2\", \"transition-colors\", \"duration-200\", 3, \"ngClass\"], [\"width\", \"14\", \"height\", \"14\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"mr-2\", \"transition-colors\", \"duration-200\", 3, \"ngClass\"], [\"cx\", \"11\", \"cy\", \"11\", \"r\", \"8\"], [\"d\", \"m21 21-4.35-4.35\"], [\"type\", \"text\", \"placeholder\", \"Buscar Formul\\u00E1rios...\", \"autocomplete\", \"off\", 1, \"bg-transparent\", \"border-none\", \"outline-none\", \"text-sm\", \"text-gray-700\", \"placeholder-gray-400\", \"flex-1\", 3, \"ngModelChange\", \"input\", \"focus\", \"blur\", \"keydown\", \"ngModel\"], [1, \"hidden\", \"lg:inline-block\", \"px-1.5\", \"py-0.5\", \"text-xs\", \"font-medium\", \"text-gray-500\", \"bg-gray-100\", \"rounded\", \"border\", \"border-gray-200\", \"transition-opacity\", \"duration-200\", 3, \"ngClass\"], [\"width\", \"14\", \"height\", \"14\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"class\", \"animate-spin text-indigo-500 ml-2\", 4, \"ngIf\"], [\"class\", \"ml-2 p-0.5 hover:bg-gray-200 rounded transition-colors duration-200\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-xl z-50 max-h-96 overflow-y-auto\", 4, \"ngIf\"], [1, \"hidden\", \"sm:inline-flex\", \"items-center\", \"gap-1.5\", \"px-3\", \"py-1.5\", \"bg-indigo-600\", \"text-white\", \"font-medium\", \"rounded-lg\", \"hover:bg-indigo-700\", \"transition-colors\", \"duration-200\", \"text-sm\", 3, \"click\"], [\"width\", \"14\", \"height\", \"14\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"M12 5v14\"], [\"d\", \"M5 12h14\"], [\"width\", \"14\", \"height\", \"14\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", 1, \"animate-spin\", \"text-indigo-500\", \"ml-2\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\", \"stroke\", \"currentColor\", \"stroke-width\", \"4\", \"stroke-opacity\", \"0.3\"], [\"fill\", \"currentColor\", \"d\", \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"], [1, \"ml-2\", \"p-0.5\", \"hover:bg-gray-200\", \"rounded\", \"transition-colors\", \"duration-200\", 3, \"click\"], [\"width\", \"10\", \"height\", \"10\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"text-gray-400\"], [\"x1\", \"18\", \"y1\", \"6\", \"x2\", \"6\", \"y2\", \"18\"], [\"x1\", \"6\", \"y1\", \"6\", \"x2\", \"18\", \"y2\", \"18\"], [1, \"absolute\", \"top-full\", \"left-0\", \"right-0\", \"mt-2\", \"bg-white\", \"border\", \"border-gray-200\", \"rounded-xl\", \"shadow-xl\", \"z-50\", \"max-h-96\", \"overflow-y-auto\"], [\"class\", \"p-6 text-center\", 4, \"ngIf\"], [\"class\", \"py-2\", 4, \"ngIf\"], [\"class\", \"p-4 text-center\", 4, \"ngIf\"], [\"class\", \"px-3 py-1.5 bg-gray-50 border-t border-gray-100\", 4, \"ngIf\"], [1, \"p-6\", \"text-center\"], [1, \"animate-spin\", \"rounded-full\", \"h-8\", \"w-8\", \"border-b-2\", \"border-indigo-600\", \"mx-auto\", \"mb-3\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"py-2\"], [1, \"px-2\", \"py-1.5\", \"text-xs\", \"font-medium\", \"text-gray-500\", \"uppercase\", \"tracking-wide\", \"border-b\", \"border-gray-100\"], [\"class\", \"px-3 py-2 cursor-pointer transition-colors duration-200 border-b border-gray-50 last:border-b-0\", 3, \"ngClass\", \"click\", \"mouseenter\", 4, \"ngFor\", \"ngForOf\"], [1, \"px-3\", \"py-2\", \"cursor-pointer\", \"transition-colors\", \"duration-200\", \"border-b\", \"border-gray-50\", \"last:border-b-0\", 3, \"click\", \"mouseenter\", \"ngClass\"], [1, \"flex\", \"items-start\", \"justify-between\"], [1, \"flex-1\", \"min-w-0\"], [1, \"flex\", \"items-center\", \"gap-2\", \"mb-1\"], [1, \"text-sm\", \"font-medium\", \"text-gray-900\", \"truncate\", 3, \"innerHTML\"], [1, \"inline-flex\", \"items-center\", \"px-2\", \"py-0.5\", \"rounded-full\", \"text-xs\", \"font-medium\", 3, \"ngClass\"], [\"class\", \"text-xs text-gray-600 mb-2 line-clamp-1\", 3, \"innerHTML\", 4, \"ngIf\"], [1, \"flex\", \"flex-wrap\", \"gap-1\"], [\"class\", \"inline-flex items-center px-2 py-0.5 rounded text-xs bg-blue-50 text-blue-700\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-600\", 4, \"ngIf\"], [1, \"ml-3\", \"flex-shrink-0\"], [1, \"w-8\", \"h-8\", \"bg-gradient-to-br\", \"from-indigo-500\", \"to-purple-600\", \"rounded-lg\", \"flex\", \"items-center\", \"justify-center\"], [\"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"text-white\"], [\"x\", \"3\", \"y\", \"3\", \"width\", \"18\", \"height\", \"18\", \"rx\", \"2\", \"ry\", \"2\"], [\"x1\", \"9\", \"y1\", \"9\", \"x2\", \"15\", \"y2\", \"9\"], [\"x1\", \"9\", \"y1\", \"15\", \"x2\", \"15\", \"y2\", \"15\"], [1, \"text-xs\", \"text-gray-600\", \"mb-2\", \"line-clamp-1\", 3, \"innerHTML\"], [1, \"inline-flex\", \"items-center\", \"px-2\", \"py-0.5\", \"rounded\", \"text-xs\", \"bg-blue-50\", \"text-blue-700\"], [1, \"inline-flex\", \"items-center\", \"px-2\", \"py-0.5\", \"rounded\", \"text-xs\", \"bg-gray-100\", \"text-gray-600\"], [1, \"p-4\", \"text-center\"], [1, \"w-12\", \"h-12\", \"bg-gray-100\", \"rounded-full\", \"flex\", \"items-center\", \"justify-center\", \"mx-auto\", \"mb-3\"], [\"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"text-gray-400\"], [1, \"text-sm\", \"font-medium\", \"text-gray-900\", \"mb-1\"], [1, \"text-xs\", \"text-gray-500\", \"mb-3\"], [1, \"inline-flex\", \"items-center\", \"gap-1\", \"px-3\", \"py-1.5\", \"bg-indigo-600\", \"text-white\", \"text-xs\", \"font-medium\", \"rounded-lg\", \"hover:bg-indigo-700\", \"transition-colors\", \"duration-200\", 3, \"click\"], [1, \"px-3\", \"py-1.5\", \"bg-gray-50\", \"border-t\", \"border-gray-100\"], [1, \"flex\", \"items-center\", \"justify-between\", \"text-xs\", \"text-gray-500\"], [1, \"hidden\", \"lg:flex\", \"flex-col\", \"items-end\"], [1, \"text-sm\", \"font-medium\", \"text-gray-900\"], [1, \"text-sm\", \"font-normal\", \"text-gray-900\"], [1, \"flex\", \"items-center\", \"gap-1.5\"], [1, \"px-3\", \"py-1.5\", \"bg-red-600\", \"text-white\", \"font-medium\", \"rounded-lg\", \"hover:bg-red-700\", \"transition-colors\", \"duration-200\", \"text-sm\", 3, \"click\"], [\"routerLink\", \"/login\", 1, \"inline-flex\", \"items-center\", \"gap-1.5\", \"px-3\", \"py-1.5\", \"text-gray-700\", \"hover:text-gray-900\", \"hover:bg-gray-100\", \"rounded-lg\", \"transition-colors\", \"duration-200\", \"text-sm\"], [\"d\", \"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4\"], [\"points\", \"10,17 15,12 10,7\"], [\"x1\", \"15\", \"y1\", \"12\", \"x2\", \"3\", \"y2\", \"12\"], [1, \"hidden\", \"sm:block\"], [\"routerLink\", \"/registrar\", 1, \"inline-flex\", \"items-center\", \"gap-1.5\", \"px-3\", \"py-1.5\", \"bg-indigo-600\", \"text-white\", \"font-medium\", \"rounded-lg\", \"hover:bg-indigo-700\", \"transition-colors\", \"duration-200\", \"text-sm\"], [\"d\", \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"], [\"cx\", \"9\", \"cy\", \"7\", \"r\", \"4\"], [\"x1\", \"19\", \"y1\", \"8\", \"x2\", \"19\", \"y2\", \"14\"], [\"x1\", \"22\", \"y1\", \"11\", \"x2\", \"16\", \"y2\", \"11\"]],\n    template: function TopbarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"header\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"a\", 5);\n        i0.ɵɵelement(4, \"img\", 6);\n        i0.ɵɵelementStart(5, \"span\", 7);\n        i0.ɵɵtext(6, \"FormSync\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(7, TopbarComponent_div_7_Template, 19, 7, \"div\", 8);\n        i0.ɵɵelementStart(8, \"div\", 4);\n        i0.ɵɵtemplate(9, TopbarComponent_ng_container_9_Template, 10, 1, \"ng-container\", 9)(10, TopbarComponent_ng_template_10_Template, 15, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementStart(12, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function TopbarComponent_Template_button_click_12_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.toggleMobileMenu());\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(13, \"svg\", 11);\n        i0.ɵɵelement(14, \"line\", 12)(15, \"line\", 13)(16, \"line\", 14);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelement(17, \"div\", 15);\n      }\n      if (rf & 2) {\n        const guestActions_r11 = i0.ɵɵreference(11);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.authService.estaAutenticado());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.authService.estaAutenticado() && ctx.nomeUsuario)(\"ngIfElse\", guestActions_r11);\n      }\n    },\n    dependencies: [CommonModule, i5.NgClass, i5.NgForOf, i5.NgIf, RouterModule, i1.RouterLink, MatIconModule, MatButtonModule, MatChipsModule, MatTooltipModule, i6.MatTooltip, FormsModule, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel],\n    styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n.smooth-transition[_ngcontent-%COMP%] {\\n  transition: all 0.2s ease;\\n}\\n\\n\\n\\n@media (prefers-reduced-motion: reduce) {\\n  *[_ngcontent-%COMP%], \\n   *[_ngcontent-%COMP%]::before, \\n   *[_ngcontent-%COMP%]::after {\\n    animation-duration: 0.01ms !important;\\n    animation-iteration-count: 1 !important;\\n    transition-duration: 0.01ms !important;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvZnJvbnQvc3JjL2FwcC9jb21wb25lbnRzL3RvcGJhci90b3BiYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwRUFBMEU7O0FBRTFFLG9FQUFvRTs7QUFFcEUsNEJBQTRCO0FBQzVCO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBLDhDQUE4QztBQUM5QztFQUNFOzs7SUFHRSxxQ0FBcUM7SUFDckMsdUNBQXVDO0lBQ3ZDLHNDQUFzQztFQUN4QztBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyogVG9wYmFyIGNvbXBvbmVudCAtIFBhZHJvbml6YWRvIGNvbSBvdXRyb3MgY29tcG9uZW50ZXMgdXNhbmRvIFRhaWx3aW5kICovXG5cbi8qIEFwZW5hcyBlc3RpbG9zIGVzc2VuY2lhaXMgcXVlIG7Dg8KjbyBwb2RlbSBzZXIgZmVpdG9zIGNvbSBUYWlsd2luZCAqL1xuXG4vKiBBbmltYcODwqfDg8K1ZXMgc3VhdmVzIHBhZHLDg8KjbyAqL1xuLnNtb290aC10cmFuc2l0aW9uIHtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbn1cblxuLyogUmVkdcODwqfDg8KjbyBkZSBtb3ZpbWVudG9zIHBhcmEgYWNlc3NpYmlsaWRhZGUgKi9cbkBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKSB7XG4gICosXG4gICo6OmJlZm9yZSxcbiAgKjo6YWZ0ZXIge1xuICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMC4wMW1zICFpbXBvcnRhbnQ7XG4gICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogMSAhaW1wb3J0YW50O1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDAuMDFtcyAhaW1wb3J0YW50O1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["CommonModule","Router","RouterModule","MatIconModule","MatButtonModule","MatChipsModule","MatTooltipModule","FormsModule","AuthService","TemplateCsvService","MobileMenuService","debounceTime","distinctUntilChanged","Subject","getPlanoNome","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵlistener","TopbarComponent_div_7_button_11_Template_button_click_0_listener","ɵɵrestoreView","_r4","ctx_r2","ɵɵnextContext","ɵɵresetView","clearSearch","ɵɵtext","ɵɵproperty","highlightMatch","template_r6","descricao","searchTerm","ɵɵsanitizeHtml","ɵɵadvance","ɵɵtextInterpolate1","campo_r8","nome","campos","length","TopbarComponent_div_7_div_12_div_2_div_3_Template_div_click_0_listener","_r5","$implicit","selectTemplate","TopbarComponent_div_7_div_12_div_2_div_3_Template_div_mouseenter_0_listener","i_r7","index","selectedIndex","ɵɵtemplate","TopbarComponent_div_7_div_12_div_2_div_3_p_7_Template","TopbarComponent_div_7_div_12_div_2_div_3_span_9_Template","TopbarComponent_div_7_div_12_div_2_div_3_span_10_Template","totalUso","ɵɵtextInterpolate2","slice","TopbarComponent_div_7_div_12_div_2_div_3_Template","ɵɵtextInterpolate3","searchResults","TopbarComponent_div_7_div_12_div_3_Template_button_click_9_listener","_r9","criarNovoTemplate","TopbarComponent_div_7_div_12_div_1_Template","TopbarComponent_div_7_div_12_div_2_Template","TopbarComponent_div_7_div_12_div_3_Template","TopbarComponent_div_7_div_12_div_4_Template","searchLoading","ɵɵtwoWayListener","TopbarComponent_div_7_Template_input_ngModelChange_6_listener","$event","_r2","ɵɵtwoWayBindingSet","TopbarComponent_div_7_Template_input_input_6_listener","onSearchInput","TopbarComponent_div_7_Template_input_focus_6_listener","onSearchFocus","TopbarComponent_div_7_Template_input_blur_6_listener","onSearchBlur","TopbarComponent_div_7_Template_input_keydown_6_listener","onSearchKeydown","TopbarComponent_div_7__svg_svg_10_Template","TopbarComponent_div_7_button_11_Template","TopbarComponent_div_7_div_12_Template","TopbarComponent_div_7_Template_button_click_13_listener","searchFocused","ɵɵtwoWayProperty","showSearchResults","ɵɵelementContainerStart","TopbarComponent_ng_container_9_Template_button_click_8_listener","_r10","logout","nomeUsuario","TopbarComponent","router","authService","templateService","mobileMenuService","mobileMenuOpen","plano","usuarioSub","planoSub","toggleMobileMenu","searchSubject","searchSubscription","constructor","ngOnInit","usuario$","subscribe","formatarNome","plano$","console","log","nomeSalvo","localStorage","getItem","pipe","term","performSearch","ngOnDestroy","unsubscribe","navigate","planoNome","getInitials","partes","trim","split","filter","parte","charAt","toUpperCase","event","target","value","next","setTimeout","key","preventDefault","Math","min","max","listarTemplates","templates","template","matchesSearchTerm","error","lowerTerm","toLowerCase","includes","some","campo","valor","text","regex","RegExp","replace","queryParams","selected","id","onDocumentClick","searchContainer","closest","contains","ɵɵdirectiveInject","i1","i2","i3","i4","selectors","hostBindings","TopbarComponent_HostBindings","rf","ctx","TopbarComponent_click_HostBindingHandler","ɵɵresolveDocument","TopbarComponent_div_7_Template","TopbarComponent_ng_container_9_Template","TopbarComponent_ng_template_10_Template","ɵɵtemplateRefExtractor","TopbarComponent_Template_button_click_12_listener","_r1","estaAutenticado","guestActions_r11","i5","NgClass","NgForOf","NgIf","RouterLink","i6","MatTooltip","i7","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"sources":["/home/danilo/Área de trabalho/formsync-nx/apps/front/src/app/components/topbar/topbar.component.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { Component, OnDestroy, OnInit, HostListener } from '@angular/core';\nimport { Router, RouterModule } from '@angular/router';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { FormsModule } from '@angular/forms';\n\nimport { AuthService } from '../../services/auth.service';\nimport { TemplateCsvService } from '../../services/template-csv.service';\nimport { MobileMenuService } from '../../services/mobile-menu.service';\nimport { Subscription, debounceTime, distinctUntilChanged, Subject } from 'rxjs';\nimport { getPlanoNome } from '../../shared/planos-config';\n\n@Component({\n  standalone: true,\n  selector: 'app-topbar',\n  imports: [\n    CommonModule,\n    RouterModule,\n    MatIconModule,\n    MatButtonModule,\n    MatChipsModule,\n    MatTooltipModule,\n    FormsModule\n  ],\n  template: `\n    <!-- Topbar Moderna para Área Logada -->\n    <header class=\"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 h-14\">\n      <div class=\"flex items-center justify-between h-full px-3\">\n        \n        <!-- Logo Compacto (esquerda) - Padrão dashboard/área logada -->\n        <div class=\"flex items-center gap-2\">\n          <a routerLink=\"\" class=\"flex items-center gap-2 hover:opacity-80 transition-opacity duration-200\">\n            <img src=\"assets/images/formsync-logo.svg\" alt=\"FormSync Logo\" class=\"w-8 h-8\">\n            <span class=\"text-xl sm:text-1xl font-black text-blue-600\">FormSync</span>\n          </a>\n        </div>\n\n        <!-- Ações Centrais (centro) -->\n        <div class=\"flex items-center gap-3\" *ngIf=\"authService.estaAutenticado()\">\n          <!-- Pesquisa Global -->\n          <div class=\"hidden md:flex relative\">\n            <div class=\"flex items-center bg-gray-50 rounded-lg px-2 py-1 min-w-48 border-2 transition-colors duration-200\"\n                 [ngClass]=\"searchFocused ? 'border-indigo-500 bg-white shadow-lg' : 'border-transparent'\">\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" \n                   class=\"mr-2 transition-colors duration-200\"\n                   [ngClass]=\"searchFocused ? 'text-indigo-500' : 'text-gray-400'\">\n                <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n                <path d=\"m21 21-4.35-4.35\"></path>\n              </svg>\n              <input \n                #searchInput\n                type=\"text\" \n                placeholder=\"Buscar Formulários...\" \n                [(ngModel)]=\"searchTerm\"\n                (input)=\"onSearchInput($event)\"\n                (focus)=\"onSearchFocus()\"\n                (blur)=\"onSearchBlur()\"\n                (keydown)=\"onSearchKeydown($event)\"\n                class=\"bg-transparent border-none outline-none text-sm text-gray-700 placeholder-gray-400 flex-1\"\n                autocomplete=\"off\"\n              />\n              <kbd class=\"hidden lg:inline-block px-1.5 py-0.5 text-xs font-medium text-gray-500 bg-gray-100 rounded border border-gray-200 transition-opacity duration-200\"\n                   [ngClass]=\"searchTerm ? 'opacity-0' : 'opacity-100'\">⌘K</kbd>\n              \n              <!-- Loading spinner -->\n              <svg *ngIf=\"searchLoading\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"animate-spin text-indigo-500 ml-2\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\" stroke-opacity=\"0.3\"></circle>\n                <path fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n\n              <!-- Clear button -->\n              <button *ngIf=\"searchTerm && !searchLoading\" \n                      (click)=\"clearSearch()\"\n                      class=\"ml-2 p-0.5 hover:bg-gray-200 rounded transition-colors duration-200\">\n                <svg width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-gray-400\">\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n                </svg>\n              </button>\n            </div>\n\n            <!-- Dropdown de Resultados -->\n            <div *ngIf=\"showSearchResults\" \n                 class=\"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-xl z-50 max-h-96 overflow-y-auto\">\n              \n              <!-- Loading State -->\n              <div *ngIf=\"searchLoading\" class=\"p-6 text-center\">\n                <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-3\"></div>\n                <p class=\"text-sm text-gray-500\">Buscando templates...</p>\n              </div>\n\n              <!-- Resultados -->\n              <div *ngIf=\"!searchLoading && searchResults.length > 0\" class=\"py-2\">\n                <div class=\"px-2 py-1.5 text-xs font-medium text-gray-500 uppercase tracking-wide border-b border-gray-100\">\n                  {{ searchResults.length }} template{{ searchResults.length > 1 ? 's' : '' }} encontrado{{ searchResults.length > 1 ? 's' : '' }}\n                </div>\n                \n                <div *ngFor=\"let template of searchResults; let i = index\" \n                     (click)=\"selectTemplate(template)\"\n                     (mouseenter)=\"selectedIndex = i\"\n                     class=\"px-3 py-2 cursor-pointer transition-colors duration-200 border-b border-gray-50 last:border-b-0\"\n                     [ngClass]=\"selectedIndex === i ? 'bg-indigo-50 border-indigo-100' : 'hover:bg-gray-50'\">\n                  \n                  <div class=\"flex items-start justify-between\">\n                    <div class=\"flex-1 min-w-0\">\n                      <!-- Nome do Formulário -->\n                      <div class=\"flex items-center gap-2 mb-1\">\n                        <h4 class=\"text-sm font-medium text-gray-900 truncate\" [innerHTML]=\"highlightMatch(template.nome, searchTerm)\"></h4>\n                        <span class=\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium\"\n                              [ngClass]=\"template.totalUso > 0 ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\">\n                          {{ template.totalUso || 0 }} uso{{ (template.totalUso || 0) !== 1 ? 's' : '' }}\n                        </span>\n                      </div>\n\n                      <!-- Descrição -->\n                      <p *ngIf=\"template.descricao\" class=\"text-xs text-gray-600 mb-2 line-clamp-1\" [innerHTML]=\"highlightMatch(template.descricao, searchTerm)\"></p>\n\n                      <!-- Campos Preview -->\n                      <div class=\"flex flex-wrap gap-1\">\n                        <span *ngFor=\"let campo of template.campos?.slice(0, 3)\" \n                              class=\"inline-flex items-center px-2 py-0.5 rounded text-xs bg-blue-50 text-blue-700\">\n                          {{ campo.nome }}\n                        </span>\n                        <span *ngIf=\"template.campos?.length > 3\" \n                              class=\"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-600\">\n                          +{{ template.campos.length - 3 }}\n                        </span>\n                      </div>\n                    </div>\n\n                    <!-- Ícone de Template -->\n                    <div class=\"ml-3 flex-shrink-0\">\n                      <div class=\"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center\">\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-white\">\n                          <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                          <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"9\"></line>\n                          <line x1=\"9\" y1=\"15\" x2=\"15\" y2=\"15\"></line>\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Nenhum Resultado -->\n              <div *ngIf=\"!searchLoading && searchResults.length === 0 && searchTerm\" class=\"p-4 text-center\">\n                <div class=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-gray-400\">\n                    <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n                    <path d=\"m21 21-4.35-4.35\"></path>\n                  </svg>\n                </div>\n                <h3 class=\"text-sm font-medium text-gray-900 mb-1\">Nenhum formulário encontrado</h3>\n                <p class=\"text-xs text-gray-500 mb-3\">Tente buscar por um nome diferente ou crie um Novo Formulário.</p>\n                <button (click)=\"criarNovoTemplate()\" class=\"inline-flex items-center gap-1 px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-200\">\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <path d=\"M12 5v14\"></path>\n                    <path d=\"M5 12h14\"></path>\n                  </svg>\n                  Criar Formulário\n                </button>\n              </div>\n\n              <!-- Footer com dicas -->\n              <div *ngIf=\"!searchLoading && searchResults.length > 0\" class=\"px-3 py-1.5 bg-gray-50 border-t border-gray-100\">\n                <div class=\"flex items-center justify-between text-xs text-gray-500\">\n                  <span>Use ↑↓ para navegar</span>\n                  <span>Enter para selecionar</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Botão Criar Novo (Ação Principal) -->\n          <button \n            (click)=\"criarNovoTemplate()\"\n            class=\"hidden sm:inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-200 text-sm\">\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <path d=\"M12 5v14\"></path>\n              <path d=\"M5 12h14\"></path>\n            </svg>\n            <span>Novo Formulário</span>\n          </button>\n        </div>\n\n        <!-- Área do Usuário (direita) -->\n        <div class=\"flex items-center gap-2\">\n          <ng-container *ngIf=\"authService.estaAutenticado() && nomeUsuario; else guestActions\">\n            \n            <!-- Notificações \n                  <button class=\"relative p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200\" matTooltip=\"Notificações\">\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\"></path>\n                <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path>\n              </svg>\n              <span class=\"absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-red-500 rounded-full\"></span>\n            </button> \n            -->\n      \n\n            <!-- Ajuda \n                    <button class=\"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200\" matTooltip=\"Ajuda\">\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                <path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"></path>\n                <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n              </svg>\n            </button> \n            -->\n    \n\n\n\n            <!-- Menu do Usuário -->\n            <div class=\"flex items-center gap-2\">\n              <!-- Info do Usuário (desktop) -->\n              <div class=\"hidden lg:flex flex-col items-end\">\n                <span class=\"text-sm font-medium text-gray-900\"><span class=\"text-sm font-normal text-gray-900\">Bem vindo,</span> {{ nomeUsuario }}!</span>\n              </div>\n\n              <!-- Avatar -->\n              <div class=\"flex items-center gap-1.5\">\n                <!-- Botão de Sair -->\n                <button (click)=\"logout()\" \n                        class=\"px-3 py-1.5 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors duration-200 text-sm\">\n                  Sair\n                </button>\n              </div>\n            </div>\n\n          </ng-container>\n\n          <!-- Ações para usuários não logados -->\n          <ng-template #guestActions>\n            <a routerLink=\"/login\" class=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200 text-sm\">\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4\"></path>\n                <polyline points=\"10,17 15,12 10,7\"></polyline>\n                <line x1=\"15\" y1=\"12\" x2=\"3\" y2=\"12\"></line>\n              </svg>\n              <span class=\"hidden sm:block\">Login</span>\n            </a>\n            <a routerLink=\"/registrar\" class=\"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-200 text-sm\">\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"></path>\n                <circle cx=\"9\" cy=\"7\" r=\"4\"></circle>\n                <line x1=\"19\" y1=\"8\" x2=\"19\" y2=\"14\"></line>\n                <line x1=\"22\" y1=\"11\" x2=\"16\" y2=\"11\"></line>\n              </svg>\n              <span class=\"hidden sm:block\">Registrar</span>\n            </a>\n          </ng-template>\n\n          <!-- Menu Mobile -->\n          <button (click)=\"toggleMobileMenu()\" class=\"lg:hidden p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200 bg-red-500\" matTooltip=\"Menu\" style=\"z-index: 9999; position: relative;\">\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line>\n              <line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line>\n              <line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </header>\n\n    <!-- Spacer para compensar o header fixo -->\n    <div class=\"h-14\"></div>\n  `,\n  styleUrl: './topbar.component.css'\n})\nexport class TopbarComponent implements OnInit, OnDestroy {\n  nomeUsuario: string = ''\n  mobileMenuOpen = false;\n  plano: string = '';\n  private usuarioSub?: Subscription;\n  private planoSub?: Subscription;\n\n  toggleMobileMenu() {\n    this.mobileMenuService.toggleMobileMenu();\n  }\n\n  // Propriedades da busca\n  searchTerm: string = '';\n  searchResults: any[] = [];\n  searchLoading: boolean = false;\n  searchFocused: boolean = false;\n  showSearchResults: boolean = false;\n  selectedIndex: number = -1;\n  private searchSubject = new Subject<string>();\n  private searchSubscription?: Subscription;\n\n  constructor(\n    private router: Router,\n    public authService: AuthService,\n    private templateService: TemplateCsvService,\n    private mobileMenuService: MobileMenuService\n  ) { }\n\n  ngOnInit() {\n    // Inscrever-se no observable de usuário\n    this.usuarioSub = this.authService.usuario$.subscribe(nome => {\n      this.nomeUsuario = this.formatarNome(nome || '');\n    });\n\n    // Inscrever-se no observable de plano (NOVO!)\n    this.planoSub = this.authService.plano$.subscribe(plano => {\n      this.plano = plano || 'PESSOAL';\n      console.log(`🔄 TopBar: Plano atualizado para ${this.plano}`);\n    });\n\n    // Carregar dados iniciais\n    const nomeSalvo = localStorage.getItem('nome');\n    if (nomeSalvo) {\n      this.nomeUsuario = this.formatarNome(nomeSalvo);\n    }\n\n    // Configurar busca com debounce\n    this.searchSubscription = this.searchSubject.pipe(\n      debounceTime(300),\n      distinctUntilChanged()\n    ).subscribe(term => {\n      this.performSearch(term);\n    });\n  }\n\n  ngOnDestroy() {\n    this.usuarioSub?.unsubscribe();\n    this.planoSub?.unsubscribe();\n    this.searchSubscription?.unsubscribe();\n  }\n\n  logout() {\n    this.authService.logout();\n  }\n\n  criarNovoTemplate() {\n    this.router.navigate(['/formularios']);\n  }\n\n  planoNome(plano: string): string {\n    return getPlanoNome(plano);\n  }\n\n  getInitials(nome: string): string {\n    if (!nome) return 'U';\n\n    const partes = nome.trim().split(' ').filter(parte => parte.length > 0);\n\n    if (partes.length === 0) return 'U';\n    if (partes.length === 1) return partes[0].charAt(0).toUpperCase();\n\n    // Pega primeira letra do primeiro e último nome\n    return (partes[0].charAt(0) + partes[partes.length - 1].charAt(0)).toUpperCase();\n  }\n\n  // Métodos da busca\n  onSearchInput(event: any) {\n    const term = event.target.value;\n    this.searchTerm = term;\n    this.selectedIndex = -1;\n\n    if (term.trim()) {\n      this.showSearchResults = true;\n      this.searchSubject.next(term.trim());\n    } else {\n      this.showSearchResults = false;\n      this.searchResults = [];\n    }\n  }\n\n  onSearchFocus() {\n    this.searchFocused = true;\n    if (this.searchTerm.trim()) {\n      this.showSearchResults = true;\n    }\n  }\n\n  onSearchBlur() {\n    // Delay para permitir cliques nos resultados\n    setTimeout(() => {\n      this.searchFocused = false;\n      this.showSearchResults = false;\n    }, 200);\n  }\n\n  onSearchKeydown(event: KeyboardEvent) {\n    if (!this.showSearchResults || this.searchResults.length === 0) return;\n\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        this.selectedIndex = Math.min(this.selectedIndex + 1, this.searchResults.length - 1);\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        this.selectedIndex = Math.max(this.selectedIndex - 1, -1);\n        break;\n      case 'Enter':\n        event.preventDefault();\n        if (this.selectedIndex >= 0 && this.selectedIndex < this.searchResults.length) {\n          this.selectTemplate(this.searchResults[this.selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        this.clearSearch();\n        break;\n    }\n  }\n\n  performSearch(term: string) {\n    if (!term.trim()) {\n      this.searchResults = [];\n      this.searchLoading = false;\n      return;\n    }\n\n    this.searchLoading = true;\n\n    this.templateService.listarTemplates().subscribe({\n      next: (templates) => {\n        // Filtrar templates que correspondem ao termo de busca\n        this.searchResults = templates.filter(template =>\n          this.matchesSearchTerm(template, term)\n        ).slice(0, 10); // Limitar a 10 resultados\n\n        this.searchLoading = false;\n      },\n      error: (error) => {\n        console.error('Erro ao Buscar Formulários:', error);\n        this.searchResults = [];\n        this.searchLoading = false;\n      }\n    });\n  }\n\n  private matchesSearchTerm(template: any, term: string): boolean {\n    const lowerTerm = term.toLowerCase();\n\n    // Buscar no nome\n    if (template.nome?.toLowerCase().includes(lowerTerm)) {\n      return true;\n    }\n\n    // Buscar na descrição\n    if (template.descricao?.toLowerCase().includes(lowerTerm)) {\n      return true;\n    }\n\n    // Buscar nos campos\n    if (template.campos?.some((campo: any) =>\n      campo.nome?.toLowerCase().includes(lowerTerm) ||\n      campo.valor?.toLowerCase().includes(lowerTerm)\n    )) {\n      return true;\n    }\n\n    return false;\n  }\n\n  highlightMatch(text: string, term: string): string {\n    if (!text || !term) return text;\n\n    const regex = new RegExp(`(${term})`, 'gi');\n    return text.replace(regex, '<mark class=\"bg-yellow-200 px-1 rounded\">$1</mark>');\n  }\n\n  selectTemplate(template: any) {\n    // Navegar para a página de templates com o template selecionado\n    this.router.navigate(['/templates'], {\n      queryParams: { selected: template.id }\n    });\n    this.clearSearch();\n  }\n\n  clearSearch() {\n    this.searchTerm = '';\n    this.searchResults = [];\n    this.showSearchResults = false;\n    this.selectedIndex = -1;\n    this.searchLoading = false;\n  }\n\n  // Listener para fechar busca ao clicar fora\n  @HostListener('document:click', ['$event'])\n  onDocumentClick(event: Event) {\n    const target = event.target as HTMLElement;\n    const searchContainer = target.closest('.relative');\n\n    if (!searchContainer || !searchContainer.contains(target)) {\n      this.showSearchResults = false;\n    }\n  }\n\n  private formatarNome(nome: string): string {\n    if (!nome) return '';\n\n    // Remove espaços extras e quebra em partes\n    const partes = nome.trim().split(' ').filter(parte => parte.length > 0);\n\n    if (partes.length === 0) return '';\n\n    // Se tem apenas uma parte, retorna ela\n    if (partes.length === 1) return partes[0];\n\n    // Se tem duas ou mais partes, retorna apenas o primeiro nome\n    return partes[0];\n  }\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}